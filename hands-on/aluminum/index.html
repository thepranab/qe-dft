<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.3">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.css" integrity="sha384-Um5gpz1odJg5Z4HAmzPtgZKdTBHZdw8S29IecapCSB31ligYPhHQZMIlWLYQGVoc" crossorigin="anonymous"><title data-react-helmet="true">DOS and bandstructure for Aluminum (metal) | Density Functional Theory calculation using Quantum Espresso</title><meta data-react-helmet="true" property="og:url" content="https://pranabdas.github.io/espresso/hands-on/aluminum"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="DOS and bandstructure for Aluminum (metal) | Density Functional Theory calculation using Quantum Espresso"><meta data-react-helmet="true" name="description" content="Variable cell relaxation"><meta data-react-helmet="true" property="og:description" content="Variable cell relaxation"><link data-react-helmet="true" rel="shortcut icon" href="/espresso/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://pranabdas.github.io/espresso/hands-on/aluminum"><link data-react-helmet="true" rel="alternate" href="https://pranabdas.github.io/espresso/hands-on/aluminum" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://pranabdas.github.io/espresso/hands-on/aluminum" hreflang="x-default"><link rel="stylesheet" href="/espresso/assets/css/styles.94baaff3.css">
<link rel="preload" href="/espresso/assets/js/runtime~main.50c1e91e.js" as="script">
<link rel="preload" href="/espresso/assets/js/main.029b6445.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/espresso/"><img src="/espresso/img/favicon.ico" alt="Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/espresso/img/favicon.ico" alt="Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Quantum Espresso Tutorial</b></a><a href="https://pranabdas.github.io" target="_self" rel="noopener noreferrer" class="navbar__item navbar__link">About me</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/pranabdas/espresso" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/espresso/"><img src="/espresso/img/favicon.ico" alt="Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/espresso/img/favicon.ico" alt="Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Quantum Espresso Tutorial</b></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a href="https://pranabdas.github.io" target="_self" rel="noopener noreferrer" class="menu__link">About me</a></li><li class="menu__list-item"><a href="https://github.com/pranabdas/espresso" target="_blank" rel="noopener noreferrer" class="menu__link header-github-link" aria-label="GitHub repository"></a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu menu--responsive thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA" aria-label="Sidebar navigation"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Docs</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/espresso/">Welcome</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/espresso/dft">DFT overview</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Setup</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/espresso/setup/install">Installation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/espresso/setup/hpc">HPC</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/espresso/setup/jupyter">Jupyter notebooks</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/espresso/setup/crystal-structure">Crystal structure</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/espresso/setup/pseudo-potential">Pseudo potentials</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">Hands-on</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/espresso/hands-on/scf">SCF calculation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/espresso/hands-on/convergence">Convergence testing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/espresso/hands-on/structure-optimization">Structure optimization</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/espresso/hands-on/dos">DOS calculation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/espresso/hands-on/bands">Bandstructure</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/espresso/hands-on/aluminum">Al (metal)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/espresso/hands-on/pdos">P-DOS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/espresso/hands-on/kpdos">k-resolved DOS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/espresso/hands-on/graphene">Graphene</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/espresso/hands-on/GaAs">GaAs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/espresso/hands-on/fe">Fe (magnetic)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/espresso/hands-on/ni">Ni (spin pol. bands)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/espresso/hands-on/dft-u">DFT+U calculation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/espresso/hands-on/soc">Spin-Orbit Coupling</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/espresso/resources">Resources</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/espresso/license">License</a></li><li class="menu__list-item"><a href="https://pranabdas.github.io/docs/" target="_blank" rel="noopener noreferrer" class="menu__link" tabindex="0"><span>Other tutorials<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_1CGd"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_3E-R"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="markdown"><header><h1 class="h1Heading_27L5">DOS and bandstructure for Aluminum (metal)</h1></header><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="variable-cell-relaxation"></a>Variable cell relaxation<a class="hash-link" href="#variable-cell-relaxation" title="Direct link to heading">#</a></h2><p>First we are going to relax the cell and choose appropriate lattice constant for
our chosen pseudo potential. In case of metals, it is important to provide
smearing parameters in the input file.</p><div class="codeBlockContainer_K1bP"><div style="color:#393A34;background-color:#f6f6f6" class="codeBlockTitle_eoMF">src/al/al_relax.in</div><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar codeBlockWithTitle_2JqI" style="color:#393A34;background-color:#f6f6f6"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">CONTROL</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">calculation</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;vc-relax&#x27;</span><span class="token plain">,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">prefix</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;al&#x27;</span><span class="token plain">,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">outdir</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;./tmp/&#x27;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  pseudo_dir </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;./&#x27;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">etot_conv_thr</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> 1e-6,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">forc_conv_thr</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> 1e-5</span></span><span class="token-line" style="color:#393A34"><span class="token plain">/</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">SYSTEM</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">ibrav</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">2</span><span class="token plain">,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  celldm</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">7.652</span><span class="token plain">,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">nat</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">ntyp</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  ecutwfc </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">50</span><span class="token plain">,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">ecutrho</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">500</span><span class="token plain">,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">occupations</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;smearing&#x27;</span><span class="token plain">,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">smearing</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;gaussian&#x27;</span><span class="token plain">,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">degauss</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.01</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">/</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">ELECTRONS</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">conv_thr</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> 1e-8</span></span><span class="token-line" style="color:#393A34"><span class="token plain">/</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">IONS</span></span><span class="token-line" style="color:#393A34"><span class="token plain">/</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">CELL</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">cell_dofree</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;ibrav&#x27;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">/</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">ATOMIC_SPECIES</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  Al </span><span class="token number" style="color:#36acaa">26.981539</span><span class="token plain"> Al.pbe-n-rrkjus_psl.1.0.0.UPF</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">ATOMIC_POSITIONS </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">alat</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  Al </span><span class="token number" style="color:#36acaa">0.00</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.00</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.00</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">K_POINTS </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">automatic</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token number" style="color:#36acaa">10</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>We run <code>pw.x</code> to perform variable cell relaxation calculation:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f6f6"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">pw.x </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> al_vc_relax.in </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> al_vc_relax.out</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Now you may open the output file in <strong>vi</strong> editor and invoke search by pressing
<code>/</code> and type <em>Final enthalpy</em> You will find the final lattice parameters below
it.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="self-consistent-field-scf-calculation"></a>Self consistent field (SCF) calculation<a class="hash-link" href="#self-consistent-field-scf-calculation" title="Direct link to heading">#</a></h2><p>We obtain relaxed lattice constant = 7.652 * 0.498611683 / 0.5 = 7.63075 Bohr.
We will use this value for our next step, self consistent calculation.</p><div class="codeBlockContainer_K1bP"><div style="color:#393A34;background-color:#f6f6f6" class="codeBlockTitle_eoMF">src/al/al_scf.in</div><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar codeBlockWithTitle_2JqI" style="color:#393A34;background-color:#f6f6f6"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">CONTROL</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">calculation</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;scf&#x27;</span><span class="token plain">,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">restart_mode</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;from_scratch&#x27;</span><span class="token plain">,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">prefix</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;al&#x27;</span><span class="token plain">,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">outdir</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;./tmp/&#x27;</span><span class="token plain">,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">pseudo_dir</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;./&#x27;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">/</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">SYSTEM</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">ibrav</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain">,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  celldm</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">7.63075</span><span class="token plain">,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">nat</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">ntyp</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">ecutwfc</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">50</span><span class="token plain">,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">ecutrho</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">500</span><span class="token plain">,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">occupations</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;smearing&#x27;</span><span class="token plain">,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">smearing</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;gaussian&#x27;</span><span class="token plain">,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">degauss</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.01</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">/</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">ELECTRONS</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">conv_thr</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> 1e-8</span></span><span class="token-line" style="color:#393A34"><span class="token plain">/</span></span><span class="token-line" style="color:#393A34"><span class="token plain">ATOMIC_SPECIES</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  Al </span><span class="token number" style="color:#36acaa">26.981539</span><span class="token plain"> Al.pbe-n-rrkjus_psl.1.0.0.UPF</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">ATOMIC_POSITIONS </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">alat</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  Al </span><span class="token number" style="color:#36acaa">0.00</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.00</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.00</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">K_POINTS </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">automatic</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token number" style="color:#36acaa">10</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>We run our self consistent calculation:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f6f6"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">pw.x </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> al_scf.in </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> al_scf.out</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="non-self-consistent-field-calculation"></a>Non-self consistent field calculation<a class="hash-link" href="#non-self-consistent-field-calculation" title="Direct link to heading">#</a></h2><p>Inspect the output file, and let&#x27;s proceed to next step non-self consistent
calculation:</p><div class="codeBlockContainer_K1bP"><div style="color:#393A34;background-color:#f6f6f6" class="codeBlockTitle_eoMF">src/al/al_nscf.in</div><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar codeBlockWithTitle_2JqI" style="color:#393A34;background-color:#f6f6f6"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">CONTROL</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">calculation</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;nscf&#x27;</span><span class="token plain">,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">restart_mode</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;from_scratch&#x27;</span><span class="token plain">,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">prefix</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;al&#x27;</span><span class="token plain">,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">outdir</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;./tmp/&#x27;</span><span class="token plain">,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">pseudo_dir</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;./&#x27;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">/</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">SYSTEM</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">ibrav</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain">,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  celldm</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">7.63075</span><span class="token plain">,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">nat</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">ntyp</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">ecutwfc</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">50</span><span class="token plain">,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">ecutrho</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">500</span><span class="token plain">,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">occupations</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;smearing&#x27;</span><span class="token plain">,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">smearing</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;gaussian&#x27;</span><span class="token plain">,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">degauss</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.01</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">/</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">ELECTRONS</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">conv_thr</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> 1e-8</span></span><span class="token-line" style="color:#393A34"><span class="token plain">/</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">ATOMIC_SPECIES</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  Al </span><span class="token number" style="color:#36acaa">26.981539</span><span class="token plain"> Al.pbe-n-rrkjus_psl.1.0.0.UPF</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">ATOMIC_POSITIONS </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">alat</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  Al </span><span class="token number" style="color:#36acaa">0.00</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.00</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.00</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">K_POINTS </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">automatic</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token number" style="color:#36acaa">40</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">40</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">40</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Note the changes in input file. The calculation changed to <code>nscf</code> and we are now
using a higher number of k-points grid.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f6f6"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">pw.x </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> al_nscf.in </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> al_nscf.out</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="density-of-states"></a>Density of states<a class="hash-link" href="#density-of-states" title="Direct link to heading">#</a></h2><p>Next we go ahead with our density of states calculation:</p><div class="codeBlockContainer_K1bP"><div style="color:#393A34;background-color:#f6f6f6" class="codeBlockTitle_eoMF">src/al/al_dos.in</div><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar codeBlockWithTitle_2JqI" style="color:#393A34;background-color:#f6f6f6"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">DOS</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">prefix</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;al&#x27;</span><span class="token plain">,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">outdir</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;./tmp/&#x27;</span><span class="token plain">,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">fildos</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;al_dos.dat&#x27;</span><span class="token plain">,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">emin</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> -10,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">emax</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">35</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">/</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>We run <code>dos.x</code> with DOS inputs:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f6f6"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">dos.x </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> al_dos.in </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> al_dos.out</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Note from our <code>al_nscf.out</code> that our Fermi energy is at 7.9421 eV. We plot our
density of states:</p><p><img alt="Al-DOS" src="/espresso/assets/images/al-dos-1a1a20854f28a36239168339111e6b9e.png"></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="bandstructure-calculation"></a>Bandstructure calculation<a class="hash-link" href="#bandstructure-calculation" title="Direct link to heading">#</a></h2><p>We prepare the input file the same as the case of our previous example silicon:</p><div class="codeBlockContainer_K1bP"><div style="color:#393A34;background-color:#f6f6f6" class="codeBlockTitle_eoMF">src/al/al_bands.in</div><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar codeBlockWithTitle_2JqI" style="color:#393A34;background-color:#f6f6f6"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">CONTROL</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">calculation</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;bands&#x27;</span><span class="token plain">,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">restart_mode</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;from_scratch&#x27;</span><span class="token plain">,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">prefix</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;al&#x27;</span><span class="token plain">,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">outdir</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;./tmp/&#x27;</span><span class="token plain">,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">pseudo_dir</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;./&#x27;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">/</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">SYSTEM</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">ibrav</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain">,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  celldm</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">7.63075</span><span class="token plain">,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">nat</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">ntyp</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">ecutwfc</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">50</span><span class="token plain">,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">ecutrho</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">500</span><span class="token plain">,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">occupations</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;smearing&#x27;</span><span class="token plain">,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">smearing</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;gaussian&#x27;</span><span class="token plain">,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">degauss</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.01</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">/</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">ELECTRONS</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">conv_thr</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> 1e-8</span></span><span class="token-line" style="color:#393A34"><span class="token plain">/</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">ATOMIC_SPECIES</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  Al </span><span class="token number" style="color:#36acaa">26.981539</span><span class="token plain"> Al.pbe-n-rrkjus_psl.1.0.0.UPF</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">ATOMIC_POSITIONS </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">alat</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  Al </span><span class="token number" style="color:#36acaa">0.00</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.00</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.00</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">K_POINTS </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">crystal_b</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">5</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  00.000 </span><span class="token number" style="color:#36acaa">0.500</span><span class="token plain"> 00.000 </span><span class="token number" style="color:#36acaa">20</span><span class="token plain">  </span><span class="token operator" style="color:#393A34">!</span><span class="token plain">L</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  00.000 </span><span class="token number" style="color:#36acaa">0.000</span><span class="token plain"> 00.000 </span><span class="token number" style="color:#36acaa">30</span><span class="token plain">  </span><span class="token operator" style="color:#393A34">!</span><span class="token plain">G</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  -0.500 </span><span class="token number" style="color:#36acaa">0.000</span><span class="token plain"> -0.500 </span><span class="token number" style="color:#36acaa">10</span><span class="token plain">  </span><span class="token operator" style="color:#393A34">!</span><span class="token plain">X</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  -0.375 </span><span class="token number" style="color:#36acaa">0.250</span><span class="token plain"> -0.375 </span><span class="token number" style="color:#36acaa">30</span><span class="token plain">  </span><span class="token operator" style="color:#393A34">!</span><span class="token plain">U</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  00.000 </span><span class="token number" style="color:#36acaa">0.000</span><span class="token plain"> 00.000 </span><span class="token number" style="color:#36acaa">20</span><span class="token plain">  </span><span class="token operator" style="color:#393A34">!</span><span class="token plain">G</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Followed by run <code>pw.x</code>:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f6f6"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">pw.x </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> al_bands.in </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> al_bands.out</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Now we proceed with post-processing:</p><div class="codeBlockContainer_K1bP"><div style="color:#393A34;background-color:#f6f6f6" class="codeBlockTitle_eoMF">src/al/al_bands_pp.in</div><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar codeBlockWithTitle_2JqI" style="color:#393A34;background-color:#f6f6f6"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">BANDS</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  prefix </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;al&#x27;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  outdir </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;./tmp/&#x27;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  filband </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;al_bands.dat&#x27;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">/</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>And run <code>bands.x</code>:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f6f6"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">bands.x </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> al_bands_pp.in </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> al_bands_pp.out</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>We obtain the following bandstructure:</p><p><img alt="Bandstructure-Al" src="/espresso/assets/images/al-bands-80a59f979dc76cc93a8a3f0098e552db.png"></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="importance-of-smearing-in-convergence"></a>Importance of smearing in convergence<a class="hash-link" href="#importance-of-smearing-in-convergence" title="Direct link to heading">#</a></h2><p>Here we will test the convergence using PWTK against number of k-points, three
different smearing functions (Gauss, Methfessel-Paxton, and Marzari-Vanderbilt),
and for various smearing values.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f6f6"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">pwtk al.degauss.pwtk</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p><img alt="convergence against smearing-Al" src="/espresso/assets/images/al-smearing-5ed252d6a01bf986d7bbebf6226b6feb.png"></p><p>We see that the <code>m-v</code> and <code>m-p</code> broadening allow for faster and smother
convergence while depending less on <code>degauss</code> value than Gaussian broadening.
The number suffix next to the legend labels are number of uniform k-points in
Monkhorst-Plank grid.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><a href="https://github.com/pranabdas/espresso/blob/master/docs/hands-on/aluminum.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_3DPF"></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/espresso/hands-on/bands"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Bandstructure</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/espresso/hands-on/pdos"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">P-DOS Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#variable-cell-relaxation" class="table-of-contents__link">Variable cell relaxation</a></li><li><a href="#self-consistent-field-scf-calculation" class="table-of-contents__link">Self consistent field (SCF) calculation</a></li><li><a href="#non-self-consistent-field-calculation" class="table-of-contents__link">Non-self consistent field calculation</a></li><li><a href="#density-of-states" class="table-of-contents__link">Density of states</a></li><li><a href="#bandstructure-calculation" class="table-of-contents__link">Bandstructure calculation</a></li><li><a href="#importance-of-smearing-in-convergence" class="table-of-contents__link">Importance of smearing in convergence</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 Pranab Das. All rights
      reserved.</div></div></div></footer></div>
<script src="/espresso/assets/js/runtime~main.50c1e91e.js"></script>
<script src="/espresso/assets/js/main.029b6445.js"></script>
</body>
</html>